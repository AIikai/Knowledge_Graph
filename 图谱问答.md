## 图谱问答技术方案

### 基于规则模板

- 通过人工构造规则识别实体，并将问题映射到属性，填充模板生成查询语句
- 优劣势

	- 规则/模板可解释、易理解、可人工编辑、可控性好，具有较高准确率
	- 召回率较低，因为模板有限，难以覆盖多样性的自然语言问题

- 案例分析

	- a. 基于豆瓣电影/书籍的知识图谱问答

	  https://github.com/weizhixiaoyi/DouBan-KGQA
	  自然语言问句转换为SPARQL查询语句
	  <1> 问句理解
	  实体识别（构建实体词表，从问句中提取词表中所包含的实体）
	  属性链接（构建关键词集合，把问句中所包含的关键词当作问句的目标属性）
	  <2> 答案推理
	  <2.1> 基于规则：获取实体和属性之后，根据规则模板将问句转换得到查询语句
	  优势在可处理简单和复杂问句，劣势在模板构建麻烦，仅能处理已定义规则，不能覆盖问句的所有情况。
	  <2.2> 基于表示学习：Trans系列方法。以Trans E为例，知识图谱中三元组向量化后可以表示为<S, P, O>，其中S为头实体，P为关系，O为尾实体。Trans E假设实体和关系之间存在S+P≈O，即头实体S加上关系P的向量信息近似等于尾实体。那就可以通过头实体和关系预测得到尾实体，即能够通过问句中的实体和目标属性信息预测得到问句答案。

	- b. 医药领域的知识图谱问答

	  https://github.com/liuhuanyong/QASystemOnMedicalKG
	  <1> 问句的意图识别（关键词）+Mention检出（特征词）
	  <2> 将意图和Mention对应到模板，转换为查询语句

### 基于信息抽取

- 模型方案

	- 1. 基于实体与关系识别的模型

	  通过实体识别等方法获得问句中的实体Mention，再通过实体链接将Mention对应到数据库中的实体，然后得出该实体在数据库中的邻居子图，并抽取出所有的关系作为候选集，之后通过关系模型（分类或相似度匹配）得到最终关系。
	  同时，此类模型大多会加上一个问题类型识别模块以提升表现。比如，问句分为单跳和多跳问句，多跳问句在查询图结构上有多种形式，通过训练模型，能够将问句分到相应的查询图结构模板上。结合模板信息，以及之前获得的候选关系中打分高的一个（单跳问题）或多个（多跳问题）作为结果，将其与实体对应的查询路径填入后查询数据库即可得出答案。

	- 2. 基于路径匹配的模型

	  类似前面的模型，同样需要NER+EL将Mention链接到KG中的实体。但在关系模型中，不直接选取最优关系，而是直接获取所有能匹配上问题类型模板的、在中心实体周边的查询路径，之后通过各类基于问句与查询路径的特征给后者打分，选取最优的查询路径，即获得答案。

- 优劣势

	- 较高的准确率和召回率
	- 可解释性差

- 案例分析

	- a. KBQA

	  https://github.com/WenRichard/KBQA-BERT
	  单跳问题基础方案：实体识别+关系匹配-->图谱查询

	- b. 一个浙大小哥哥的项目

	  http://www.zq-ai.com/#/kgqa （体验网址）
	  https://github.com/wangjiezju1988/kgqa?from=singlemessage （刚开头）
	  
	  bert4keras electratiny 场景分类 + NER实体识别 + SimBert相似度匹配
	  五个场景：SP->O，SP-(O)-P->O，PO->S，OP->S，SO->P
	  其中S是头实体，P是关系，O是尾实体
	  SP->O：王健林他爹是谁？
	  SP-(O)-P->O：王思聪他爹创立的公司是什么？
	  PO->S：老爹是王健林的那个人是谁？
	  OP->S：王健林是谁他爹？
	  SO->P：姚明和马云谁更高？
	  分析：通过对问句进行场景分类，针对性解决个别类型的复杂问题，如对比型和事实型多跳等。

	- c. 基于多标签策略的中文知识图谱问答

	  详见https://zhuanlan.zhihu.com/p/144553222
	  https://blog.csdn.net/zzkv587/article/details/102954876

### 基于语义解析

通过对自然语言进行语义上的分析，将问句转化为一种能够让知识库’看懂’的语义表示（即逻辑形式），进而通过相应的查询语句在知识库中进行查询，从而得出答案。
语法解析的过程可以看作是自底向上构造语法树的过程，树的根节点就是该自然语言问句最终的逻辑形式表达。

- 优劣势

	- 召回比模板高，可解释性尚可
	- 涉及语法相关知识，较为麻烦

### 基于向量建模

向量建模的思想与信息抽取比较接近，前期都是通过把问题中的主题词映射到知识库中的实体，得到候选答案。基于向量建模是把问题和候选答案统一映射到一个低维空间，得到它们的分布式表达，通过数据集对该分布式表达进行训练，使得问题向量和它对应的正确答案向量在低维空间的关联得分（通常以点乘为形式）尽量高。当模型训练完成后，即可根据候选答案的向量表达和问句表达的得分进行筛选，将得分最高的作为最终答案。

- 优劣势

	- 实现简单，几乎无需人工定义特征
	- 缺少解释性

### 文本混合问答

<1> Open Domain Question Answering Using Early Fusion of Knowledge Bases and Text  2018
论文https://zhuanlan.zhihu.com/p/65478243
链接https://github.com/OceanskySun/GraftNet

- 将文本作为补充知识源，解决数据稀疏性问题
- 优劣势

	- 更高的准确率和召回率
	- 可解释性差，适用条件严格（配对文本）

### 基于深度学习

- 1. 优化上述传统问答方案

	- 优劣势

		- 较高的准确率和召回率
		- 神经网络可解释性差

- 2. End-to-End

  将离散的问题表示为连续向量，通过深度神经网络理解问题。通常采用端到端的方式，同时建模问题表示和属性关联，直接将问题和知识图谱作为模型输入，并预测属性理解的结果，问题和知识图谱的特征表示与模型的其他参数是同时训练的。

	- 模型

		- Attention Model、Memory Network

		  <1>Large-scale Simple Question Answering with Memory Networks  2015
		  <2>Question Answering over Knowledge Base with Neural Attention Combining Global Knowledge Information  2016
		  <3>Bidirectional Attentive Memory Networks for Question Answering over Knowledge Bases  2019
		  论文https://zhuanlan.zhihu.com/p/86246631
		  链接https://github.com/hugochan/BAMnet

	- 优劣势

		- 简单问题准确率不错
		- 复杂问题效果差，难以落地
